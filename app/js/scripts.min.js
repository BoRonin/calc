"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function adjustKrone(e,t,a){allProds[1].ts=Number(e.value);var n=[].concat(_toConsumableArray(e.value));119!==Number(""+n[3]+n[4]+n[5])||allProds[4]?allProds[4]&&(allProds[0].quantity=1,allProds[0].amount=allProds[0].price*allProds[0].quantity,allProds.splice(-1,1)):(allProds[0].quantity=2,allProds[0].amount=allProds[0].price*allProds[0].quantity,allProds.push({amount:2,img:"https://pp.userapi.com/c9266/v9266282/2fa/oy2a54KWUoQ.jpg",name:"Наконечник 605",price:1,quantity:2,ts:Number("435605"+t.value)})),adjustRingQuantity(a)}function adjustRingQuantity(e){allProds[3].quantity=e.value/10*allProds[0].quantity,allProds[3].amount=allProds[3].quantity*allProds[3].price}function adjustQuantity(e,t){e.quantity=t,e.amount=e.quantity*e.price}function activateFirstPick(e){var t=e.target.closest(".carType");if(t){e.parentElement;var a=t.children[1].innerHTML;if(t.classList.contains("activeFirstPick"))console.log("has activeFirstPick class");else{t.classList.add("activeFirstPick");var n=document.querySelector(".statusLineStepOne"),r=document.querySelector(".statusLineStepTwo");n.classList.remove("statusLineStepNext"),n.classList.add("statusLineStepActive"),r.classList.add("statusLineStepNext"),n.innerHTML="&#10004; <span>Тип<br> "+a+"</span>"}document.querySelector(".firstPick").style.opacity="0",setTimeout(function(){document.querySelector(".firstPick").style.display="none"},300),setTimeout(function(){appearSecondPick()},300)}}function activateSecondPick(e){var t=e.target.closest(".carType2");if(t){e.parentElement;var a=t.children[1].innerHTML;if(t.classList.contains("activeSecondPick"))console.log("has activeSecondPick class");else{t.classList.add("activeSecondPick");var n=document.querySelector(".statusLineStepTwo"),r=document.querySelector(".statusLineStepThree");n.classList.remove("statusLineStepNext"),n.classList.add("statusLineStepActive"),r.classList.add("statusLineStepNext"),n.innerHTML="&#10004; <span>Серия<br> "+a+"</span>"}document.querySelector(".secondPick").style.opacity="0",setTimeout(function(){document.querySelector(".secondPick").style.display="none"},300),setTimeout(function(){appearThirdPick()},300)}}function activathirdPick(e){var t=e.target.closest(".carType2");if(t){e.parentElement;var a=t.children[1].innerHTML;if(t.classList.contains("activeSecondPick"))console.log("has activeSecondPick class");else{t.classList.add("activeSecondPick");var n=document.querySelector(".statusLineStepThree"),r=document.querySelector(".statusLineStepThree");n.classList.remove("statusLineStepNext"),n.classList.add("statusLineStepActive"),r.classList.add("statusLineStepNext"),n.innerHTML="&#10004; <span>Серия<br> "+a+"</span>"}document.querySelector(".secondPick").style.opacity="0",setTimeout(function(){document.querySelector(".secondPick").style.display="none"},300),setTimeout(function(){appearThirdPick()},300)}}function appearSecondPick(){document.querySelector(".secondPick").style.display="block",setTimeout(function(){return document.querySelector(".secondPick").style.opacity="1"},200)}function appearThirdPick(){document.querySelector(".thirdPick").style.display="block",setTimeout(function(){return document.querySelector(".thirdPick").style.opacity="1"},200)}document.addEventListener("DOMContentLoaded",function(){clearCart();document.querySelector(".calc");document.querySelector(".firstPick").addEventListener("click",function(e){return activateFirstPick(e)}),document.querySelector(".secondPick").addEventListener("click",function(e){return activateSecondPick(e)}),document.querySelector(".toTrash").addEventListener("click",function(){allProds[0].name="Профиль "+S.value,allProds[1].name="Кронштейн "+f.value,allProds[2].name="Наконечник "+q.value,allProds[3].name="Кольца "+T.value;var e=document.querySelector(".statusLineStepThree");e.classList.remove("statusLineStepNext"),e.classList.add("statusLineStepActive"),e.innerHTML="&#10004; <span>Готово!</span>",setTimeout(function(){clearCart(),prod(allProds)},300)});var L=document.querySelector(".color"),a=document.querySelector(".length"),S=document.querySelector(".profile"),f=document.querySelector(".kronsh"),q=document.querySelector(".end"),T=document.querySelector(".ring");a.addEventListener("change",function(){var e=[].concat(_toConsumableArray(S[S.selectedIndex].value)),t=""+e[0]+e[1]+e[2]+a.value+e[6]+e[7]+e[8];S[S.selectedIndex].value=t,S[S.selectedIndex].innerHTML=t,allProds[0].ts=Number(S.value),240==a.value||300==a.value?allProds[1].quantity=3:allProds[1].quantity=2,allProds[1].amount=allProds[1].quantity*allProds[1].price,adjustRingQuantity(a)}),S.addEventListener("change",function(){S.value.startsWith("440")?(a[0].value=150)&&(a.selectedIndex=0,a[0].value=200,a[0].innerHTML=200,a[1].value=240,a[1].innerHTML=240,a[2].value=300,a[2].innerHTML=300,allProds[0].ts=S.value):(a[0].value=200)&&(a.selectedIndex=0,a[0].value=150,a[0].innerHTML=150,a[1].value=200,a[1].innerHTML=200,a[2].value=240,a[2].innerHTML=240),allProds[0].ts=Number(S.value),adjustRingQuantity(a)}),L.addEventListener("change",function(){for(var e=[].concat(_toConsumableArray(L.value)),t=0;t<S.length;t++){var a=S[t],n=[].concat(_toConsumableArray(a.value));n[6]=e[0],n[7]=e[1],n[8]=e[2];var r=n.join("");S[t].value=r,S[t].innerHTML=r}for(var c=0;c<f.length;c++){var o=f[c],s=[].concat(_toConsumableArray(o.value));s[6]=e[0],s[7]=e[1],s[8]=e[2];var i=s.join("");f[c].value=i,f[c].innerHTML=i}for(var l=0;l<q.length;l++){var u=q[l],d=[].concat(_toConsumableArray(u.value));d[6]=e[0],d[7]=e[1],d[8]=e[2];var v=d.join("");q[l].value=v,q[l].innerHTML=v}for(var p=0;p<T.length;p++){var m=T[p],y=[].concat(_toConsumableArray(m.value));y[6]=e[0],y[7]=e[1],y[8]=e[2];var P=y.join("");T[p].value=P,T[p].innerHTML=P}allProds[0].ts=Number(S.value),allProds[1].ts=Number(f.value),allProds[2].ts=Number(q.value),allProds[3].ts=Number(T.value),allProds[4]&&(allProds[4].ts=Number("435605"+L.value))}),f.addEventListener("change",function(){adjustKrone(f,L,a)})});var allProds=[{amount:1,img:"https://pp.userapi.com/c9266/v9266282/2fa/oy2a54KWUoQ.jpg",name:"Профиль",price:1,quantity:1,ts:440200105},{amount:2,img:"https://pp.userapi.com/c830209/v830209609/2d598/XovK7FVpYCM.jpg",name:"Кронштейн",price:1,quantity:2,ts:435110105},{amount:1,img:"https://pp.userapi.com/c310830/v310830469/59d5/gF-598GyC5g.jpg",name:"Наконечник",price:1,quantity:1,ts:435601105},{amount:20,img:"https://pp.userapi.com/c623321/v623321725/8805/3Zo4UJu8-Mw.jpg",name:"Кольца",price:1,quantity:20,ts:435035105}];function clearCart(){for(var e=tcart.products.length,t=0;t<e;t++)tcart.products.pop();tcart.amount=0,tcart.prodamount=0,tcart.total=0,document.querySelector(".t706__carticon-counter").innerHTML=tcart.total}function prod(e){clearCart();var t=JSON.parse(JSON.stringify(e)),a=!0,n=!1,r=void 0;try{for(var c,o=t[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var s=c.value;tcart.products.push(s),tcart.amount+=s.price*s.quantity,tcart.prodamount+=s.price*s.quantity,tcart.total+=s.quantity}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}document.querySelector(".t706__carticon-counter").innerHTML=tcart.total,tcart__openCart()}