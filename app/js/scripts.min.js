"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function colorCorrection(t,e,a){if(t!==document.querySelector(".endDivs")){var r=t.getElementsByTagName("div"),i=null;for(var n in r)"object"===_typeof(r[n])&&((i=[].concat(_toConsumableArray(r[n].getAttribute("data-value"))))[6]=e[0],i[7]=e[1],i[8]=e[2],r[n].setAttribute("data-value",i.join("")),r[n].classList.contains("activeDiv")&&(allProds[a].ts=Number(r[n].getAttribute("data-value"))))}else{var o=t.getElementsByTagName("div");for(var c in o)"object"===_typeof(o[c])&&o[c].classList.contains("fourthDiv")&&((i=[].concat(_toConsumableArray(o[c].getAttribute("data-value"))))[6]=e[0],i[7]=e[1],i[8]=e[2],o[c].setAttribute("data-value",i.join("")),o[c].classList.contains("activeDiv")&&(allProds[a].ts=Number(o[c].getAttribute("data-value"))))}}function activateNode(t,e){var a=t.getElementsByTagName("div");for(var r in a)"object"===_typeof(a[r])&&a[r].classList.contains("activeDiv")&&a[r].classList.remove("activeDiv");e.classList.add("activeDiv")}function adjustKrone(t,e,a){allProds[1].ts=Number(t.getAttribute("data-value")),allProds[1].img=t.children[0].getAttribute("src");var r=[].concat(_toConsumableArray(t.getAttribute("data-value")));if(119!==Number(""+r[3]+r[4]+r[5])||allProds[4])allProds[4]&&(allProds[0].quantity=1,allProds[0].amount=allProds[0].price*allProds[0].quantity,allProds.splice(-1,1));else{allProds[0].quantity=2,allProds[0].amount=allProds[0].price*allProds[0].quantity;var i="435605"+e.getAttribute("data-value");allProds.push({amount:2,img:"https://static.tildacdn.com/tild3965-6432-4863-b734-613531306333/435-605.jpg",name:"Наконечник 605",price:1,quantity:2,ts:Number(i)})}adjustRingQuantity(a)}function adjustRingQuantity(t){allProds[3].quantity=t.value/10*allProds[0].quantity,allProds[3].amount=allProds[3].quantity*allProds[3].price}function adjustQuantity(t,e){t.quantity=e,t.amount=t.quantity*t.price}function next(t,e,a){disappearPick(a),setTimeout(function(){appearPick(e)},300)}function activePick2(t,e){t.target.closest(".thirdDiv")}function activatePick(t,e){var a=t.target.closest(".carType");if(console.log(a),a){console.log("hey");var r=a.parentElement;a.classList.add("activePick"),disappearPick(r),setTimeout(function(){appearPick(e)},300)}}function disappearPick(t){t.style.opacity="0",setTimeout(function(){t.style.display="none"},300)}function appearPick(t){if(t.classList.contains("calcBut"))return t.style.display="flex",void setTimeout(function(){return t.style.opacity="1"},200);t.style.display="block",setTimeout(function(){return t.style.opacity="1"},200)}document.addEventListener("DOMContentLoaded",function(){document.querySelector(".calc"),document.querySelector(".statusLineStepOne"),document.querySelector(".statusLineStepTwo"),document.querySelector(".statusLineStepThree"),document.querySelector(".statusLineStepFour");var e=document.querySelector(".secondPick"),a=document.querySelector(".firstPick"),i=document.querySelector(".colorBox"),s=document.querySelector(".length"),u=document.querySelector(".profileDivs"),n=document.querySelector(".kronshDivs"),o=document.querySelector(".endDivs"),c=document.querySelector(".ringDivs"),r=document.querySelector(".toCarType");r.addEventListener("click",function(t){next(t,e,a),setTimeout(function(){appearPick(l)},300),disappearPick(r)});var l=document.querySelector(".toOther");l.addEventListener("click",function(t){disappearPick(l),next(t,document.querySelector(".other"),e),setTimeout(function(){appearPick(document.querySelector(".thirdPick"))},300)}),document.querySelector(".toKronsh").addEventListener("click",function(t){next(t,document.querySelector(".thirdAndAHalfPick"),document.querySelector(".thirdPick"))}),document.querySelector(".toLast").addEventListener("click",function(t){next(t,document.querySelector(".fourthPick"),document.querySelector(".thirdAndAHalfPick"))}),document.querySelector(".toTrash").addEventListener("click",function(){allProds[0].name="Профиль "+v.getAttribute("data-value"),allProds[1].name="Кронштейн "+m.getAttribute("data-value"),allProds[2].name="Наконечник "+y.getAttribute("data-value"),allProds[3].name="Кольца "+p.getAttribute("data-value");var t=document.querySelector(".statusLineStepFour");t.classList.remove("statusLineStepNext"),t.classList.add("statusLineStepActive"),t.innerHTML="&#10004; <span>Готово!</span>",setTimeout(function(){clearCart(),prod(allProds)},300)});var d=i.getElementsByTagName("div")[0],v=u.getElementsByTagName("div")[0],m=n.getElementsByTagName("div")[0],y=o.getElementsByTagName("div")[0],p=c.getElementsByTagName("div")[0];e.addEventListener("click",function(t){var e=t.target.closest(".carType2");if(e&&!e.classList.contains("activeDiv")){e.getAttribute("data-value");console.log(e.parentElement),activateNode(e.parentElement,e)}}),a.addEventListener("click",function(t){var e=t.target.closest(".carType");if(e&&!e.classList.contains("activeDiv")){e.getAttribute("data-value");activateNode(e.parentElement,e)}}),s.addEventListener("change",function(){var t=[].concat(_toConsumableArray(v.getAttribute("data-value"))),e=""+t[0]+t[1]+t[2]+s.value+t[6]+t[7]+t[8];v.setAttribute("data-value",e),console.log(v.getAttribute("data-value")),allProds[0].ts=Number(v.getAttribute("data-value")),240==s.value||300==s.value?allProds[1].quantity=3:allProds[1].quantity=2,allProds[1].amount=allProds[1].quantity*allProds[1].price,adjustRingQuantity(s)}),u.addEventListener("click",function(t){var e=t.target.closest(".profileDiv");if(e&&!e.classList.contains("activeDiv")){var a=e.getAttribute("data-value");if(activateNode(u,e),v=e,a.startsWith("440")){if(s[0].value=150){s.selectedIndex=0,s[0].value=200,s[0].innerHTML="200 см.",s[1].value=240,s[1].innerHTML="240 см.",s[2].value=300,s[2].innerHTML="300 см.";var r=u.getElementsByTagName("div"),i=null;for(var n in r)"object"===_typeof(r[n])&&((i=[].concat(_toConsumableArray(r[n].getAttribute("data-value"))))[3]="2",i[4]="0",i[5]="0",r[n].setAttribute("data-value",i.join("")),r[n].classList.contains("activeDiv")&&(v=r[n]))}}else if(s[0].value=200){s.selectedIndex=0,s[0].value=150,s[0].innerHTML="150 см.",s[1].value=200,s[1].innerHTML="200 см.",s[2].value=240,s[2].innerHTML="240 см.";var o=u.getElementsByTagName("div"),c=null;for(var l in o)"object"===_typeof(o[l])&&((c=[].concat(_toConsumableArray(o[l].getAttribute("data-value"))))[3]="1",c[4]="5",c[5]="0",o[l].setAttribute("data-value",c.join("")),o[l].classList.contains("activeDiv")&&(v=o[l]))}allProds[0].ts=Number(v.getAttribute("data-value")),allProds[0].img=e.children[0].getAttribute("src"),adjustRingQuantity(s)}}),i.addEventListener("click",function(t){var e=t.target.closest(".colorDiv");if(e&&!e.classList.contains("activeDiv")){activateNode(i,d=e);var a=e.getAttribute("data-value"),r=[].concat(_toConsumableArray(a));colorCorrection(u,r,0),colorCorrection(n,r,1),colorCorrection(o,r,2),colorCorrection(c,r,3),allProds[4]&&(allProds[4].ts=Number("435605"+e.getAttribute("data-value")))}}),n.addEventListener("click",function(t){var e=t.target.closest(".kronshDiv");e&&(e.classList.contains("activeDiv")||(m=e,console.log(m),activateNode(n,e),adjustKrone(e,d,s)))}),o.addEventListener("click",function(t){var e=t.target.closest(".endDiv");e&&(e.classList.contains("activeDiv")||(activateNode(o,e),y=e,allProds[2].ts=Number(e.getAttribute("data-value")),allProds[2].img=e.children[0].getAttribute("src")))}),c.addEventListener("click",function(t){var e=t.target.closest(".ringDiv");e&&(e.classList.contains("activeDiv")||(activateNode(c,e),p=e,allProds[3].ts=Number(e.getAttribute("data-value")),allProds[3].img=e.children[0].getAttribute("src")))})});var allProds=[{amount:1,img:"https://static.tildacdn.com/tild3166-3038-4363-b137-316663393566/440-200.jpg",name:"Профиль",price:1,quantity:1,ts:440200105},{amount:2,img:"https://static.tildacdn.com/tild3736-3861-4263-a661-616236333766/435-110.jpg",name:"Кронштейн",price:1,quantity:2,ts:435110105},{amount:1,img:"https://static.tildacdn.com/tild3032-6262-4064-a237-396265373763/435-601.jpg",name:"Наконечник",price:1,quantity:1,ts:435601105},{amount:20,img:"https://static.tildacdn.com/tild6663-6462-4662-a430-316563616430/435-035.jpg",name:"Кольца",price:1,quantity:20,ts:435035105}];function clearCart(){for(var t=tcart.products.length,e=0;e<t;e++)tcart.products.pop();tcart.amount=0,tcart.prodamount=0,tcart.total=0,document.querySelector(".t706__carticon-counter").innerHTML=tcart.total}function prod(t){clearCart();var e=JSON.parse(JSON.stringify(t)),a=!0,r=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var c=n.value;tcart.products.push(c),tcart.amount+=c.price*c.quantity,tcart.prodamount+=c.price*c.quantity,tcart.total+=c.quantity}}catch(t){r=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}document.querySelector(".t706__carticon-counter").innerHTML=tcart.total,tcart__openCart()}