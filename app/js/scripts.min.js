"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function adjustKrone(t,e,a){allProds[1].ts=Number(t.value);var r=[].concat(_toConsumableArray(t.value));119!==Number(""+r[3]+r[4]+r[5])||allProds[4]?allProds[4]&&(allProds[0].quantity=1,allProds[0].amount=allProds[0].price*allProds[0].quantity,allProds.splice(-1,1)):(allProds[0].quantity=2,allProds[0].amount=allProds[0].price*allProds[0].quantity,allProds.push({amount:2,img:"https://pp.userapi.com/c9266/v9266282/2fa/oy2a54KWUoQ.jpg",name:"Наконечник 605",price:1,quantity:2,ts:Number("435605"+e.value)})),adjustRingQuantity(a)}function adjustRingQuantity(t){allProds[3].quantity=t.value/10*allProds[0].quantity,allProds[3].amount=allProds[3].quantity*allProds[3].price}function adjustQuantity(t,e){t.quantity=e,t.amount=t.quantity*t.price}function next(t,e,a){var r=document.querySelector(".statusLineStepThree"),n=document.querySelector(".statusLineStepFour");r.classList.remove("statusLineStepNext"),r.classList.add("statusLineStepActive"),n.classList.add("statusLineStepNext"),r.innerHTML="&#10004; <span>Профиль и кронштейн</span>",disappearPick(a),setTimeout(function(){appearPick(e)},300)}function activatePick(t,e){var a=t.target.closest(".carType");if(a){console.log("hey");var r=a.parentElement,n=a.children[1].innerHTML,o=document.querySelector(".statusLineStepOne"),u=document.querySelector(".statusLineStepTwo"),c="Тип";a.classList.add("activePick"),r.classList.contains("secondPick")?(o=document.querySelector(".statusLineStepTwo"),u=document.querySelector(".statusLineStepThree"),c="Серия"):r.classList.contains("thirdPick")&&(o=document.querySelector(".statusLineStepThree"),u=document.querySelector(".statusLineStepFour"),c="Профиль и кронштейн",n=""),o.classList.remove("statusLineStepNext"),o.classList.add("statusLineStepActive"),u.classList.add("statusLineStepNext"),o.innerHTML="&#10004; <span>"+c+"<br> "+n+"</span>",disappearPick(r),setTimeout(function(){appearPick(e)},300)}}function disappearPick(t){t.style.opacity="0",setTimeout(function(){t.style.display="none"},300)}function appearPick(t){t!=document.querySelector(".thirdPick")&&t!=document.querySelector(".fourthPick")||(document.querySelector(".display").style.display="block",setTimeout(function(){return document.querySelector(".display").style.opacity="1"},200)),t.style.display="block",setTimeout(function(){return t.style.opacity="1"},200)}document.addEventListener("DOMContentLoaded",function(){document.querySelector(".calc"),document.querySelector(".statusLineStepOne"),document.querySelector(".statusLineStepTwo"),document.querySelector(".statusLineStepThree"),document.querySelector(".statusLineStepFour");document.querySelector(".firstPick").addEventListener("click",function(t){return activatePick(t,e)});var e=document.querySelector(".secondPick");e.addEventListener("click",function(t){return activatePick(t,document.querySelector(".thirdPick"))}),document.querySelector(".toLast").addEventListener("click",function(t){next(t,document.querySelector(".fourthPick"),document.querySelector(".thirdPick"))});document.querySelector(".toTrash");var S=document.querySelector(".color"),a=document.querySelector(".length"),q=document.querySelector(".profile"),P=document.querySelector(".kronsh"),f=document.querySelector(".end"),h=document.querySelector(".ring");a.addEventListener("change",function(){var t=[].concat(_toConsumableArray(q[q.selectedIndex].value)),e=""+t[0]+t[1]+t[2]+a.value+t[6]+t[7]+t[8];q[q.selectedIndex].value=e,q[q.selectedIndex].innerHTML=e,allProds[0].ts=Number(q.value),240==a.value||300==a.value?allProds[1].quantity=3:allProds[1].quantity=2,allProds[1].amount=allProds[1].quantity*allProds[1].price,adjustRingQuantity(a)}),q.addEventListener("change",function(){q.value.startsWith("440")?(a[0].value=150)&&(a.selectedIndex=0,a[0].value=200,a[0].innerHTML=200,a[1].value=240,a[1].innerHTML=240,a[2].value=300,a[2].innerHTML=300,allProds[0].ts=q.value):(a[0].value=200)&&(a.selectedIndex=0,a[0].value=150,a[0].innerHTML=150,a[1].value=200,a[1].innerHTML=200,a[2].value=240,a[2].innerHTML=240),allProds[0].ts=Number(q.value),adjustRingQuantity(a)}),S.addEventListener("change",function(){for(var t=[].concat(_toConsumableArray(S.value)),e=0;e<q.length;e++){var a=q[e],r=[].concat(_toConsumableArray(a.value));r[6]=t[0],r[7]=t[1],r[8]=t[2];var n=r.join("");q[e].value=n,q[e].innerHTML=n}for(var o=0;o<P.length;o++){var u=P[o],c=[].concat(_toConsumableArray(u.value));c[6]=t[0],c[7]=t[1],c[8]=t[2];var l=c.join("");P[o].value=l,P[o].innerHTML=l}for(var i=0;i<f.length;i++){var s=f[i],d=[].concat(_toConsumableArray(s.value));d[6]=t[0],d[7]=t[1],d[8]=t[2];var p=d.join("");f[i].value=p,f[i].innerHTML=p}for(var y=0;y<h.length;y++){var m=h[y],v=[].concat(_toConsumableArray(m.value));v[6]=t[0],v[7]=t[1],v[8]=t[2];var L=v.join("");h[y].value=L,h[y].innerHTML=L}allProds[0].ts=Number(q.value),allProds[1].ts=Number(P.value),allProds[2].ts=Number(f.value),allProds[3].ts=Number(h.value),allProds[4]&&(allProds[4].ts=Number("435605"+S.value))}),P.addEventListener("change",function(){adjustKrone(P,S,a)})});var allProds=[{amount:1,img:"https://pp.userapi.com/c9266/v9266282/2fa/oy2a54KWUoQ.jpg",name:"Профиль",price:1,quantity:1,ts:440200105},{amount:2,img:"https://pp.userapi.com/c830209/v830209609/2d598/XovK7FVpYCM.jpg",name:"Кронштейн",price:1,quantity:2,ts:435110105},{amount:1,img:"https://pp.userapi.com/c310830/v310830469/59d5/gF-598GyC5g.jpg",name:"Наконечник",price:1,quantity:1,ts:435601105},{amount:20,img:"https://pp.userapi.com/c623321/v623321725/8805/3Zo4UJu8-Mw.jpg",name:"Кольца",price:1,quantity:20,ts:435035105}];function clearCart(){for(var t=tcart.products.length,e=0;e<t;e++)tcart.products.pop();tcart.amount=0,tcart.prodamount=0,tcart.total=0,document.querySelector(".t706__carticon-counter").innerHTML=tcart.total}function prod(t){clearCart();var e=JSON.parse(JSON.stringify(t)),a=!0,r=!1,n=void 0;try{for(var o,u=e[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var c=o.value;tcart.products.push(c),tcart.amount+=c.price*c.quantity,tcart.prodamount+=c.price*c.quantity,tcart.total+=c.quantity}}catch(t){r=!0,n=t}finally{try{!a&&u.return&&u.return()}finally{if(r)throw n}}document.querySelector(".t706__carticon-counter").innerHTML=tcart.total,tcart__openCart()}